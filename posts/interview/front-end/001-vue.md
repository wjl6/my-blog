---
title: "001-vue.md"
date: 2026-01-08 15:03:06
tags: []
---

## 1. Vue2 å’Œ Vue3 çš„åŒºåˆ«
Vue3 æ˜¯åœ¨ä¿æŒ Vue2 ä½¿ç”¨ä½“éªŒçš„å‰æä¸‹ï¼Œ**é‡å†™äº†å“åº”å¼ç³»ç»Ÿå’Œåº•å±‚æ¶æ„**ï¼Œå¼•å…¥ Composition APIï¼Œ**åœ¨æ€§èƒ½ã€å¯ç»´æŠ¤æ€§å’Œ TypeScript æ”¯æŒä¸Šéƒ½æœ‰æ˜¾è‘—æå‡**ã€‚

### å“åº”å¼åŸç†ä¸åŒï¼ˆå¿…è€ƒï¼‰

| å¯¹æ¯”ç»´åº¦         | Vue2ï¼ˆObject.definePropertyï¼‰| Vue3ï¼ˆProxyï¼‰|
|------------------|-----------------------------------------------------------|-----------------------------------------------------------|
| æ ¸å¿ƒå®ç°         | æ•°æ®åŠ«æŒï¼Œé‡å†™å•ä¸ªå±æ€§çš„ get/set                          | å¯¹è±¡ä»£ç†ï¼Œæ‹¦æˆªæ•´ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ“ä½œ                          |
| åˆå§‹åŒ–æ–¹å¼       | é€’å½’éå†æ‰€æœ‰å·²æœ‰å±æ€§ï¼Œä¸€æ¬¡æ€§å®ŒæˆåŠ«æŒ                      | æƒ°æ€§é€’å½’ï¼Œä»…è®¿é—®æ·±å±‚å±æ€§æ—¶æ‰åˆ›å»ºä»£ç†                      |
| æ”¯æŒæ–°å¢å±æ€§     | âŒ ä¸æ”¯æŒï¼Œéœ€ä½¿ç”¨ Vue.set()                               | âœ… æ”¯æŒï¼Œç›´æ¥èµ‹å€¼å³å¯è§¦å‘æ›´æ–°                              |
| æ”¯æŒåˆ é™¤å±æ€§     | âŒ ä¸æ”¯æŒï¼Œéœ€ä½¿ç”¨ Vue.delete()                            | âœ… æ”¯æŒï¼Œç›´æ¥ delete å³å¯è§¦å‘æ›´æ–°                          |
| æ•°ç»„æ”¯æŒ         | ä»…æ”¯æŒ 7 ç§å˜å¼‚æ–¹æ³•ï¼Œä¸æ”¯æŒç´¢å¼• / é•¿åº¦ä¿®æ”¹                | âœ… æ”¯æŒæ‰€æœ‰æ•°ç»„æ“ä½œï¼ˆç´¢å¼•ã€é•¿åº¦ã€å˜å¼‚æ–¹æ³•ï¼‰|
| åµŒå¥—å¯¹è±¡æ€§èƒ½     | åˆå§‹åŒ–é€’å½’è€—æ—¶ä¹…ï¼Œå†…å­˜å¼€é”€å¤§                              | æƒ°æ€§é€’å½’ï¼Œåˆå§‹åŒ–æ€§èƒ½é«˜ï¼Œå†…å­˜å¼€é”€å°                        |
| é›†åˆç±»å‹æ”¯æŒ     | âŒ ä¸æ”¯æŒ Map/Set ç­‰                                       | âœ… åŸç”Ÿæ”¯æŒ Map/Set/WeakMap ç­‰                            |
| æ“ä½œè§„èŒƒæ€§       | ç›´æ¥æ“ä½œç›®æ ‡å¯¹è±¡ï¼Œæ— ç»Ÿä¸€è¿”å›å€¼                            | é…åˆ Reflectï¼Œæ“ä½œæ›´è§„èŒƒï¼Œè¿”å›åˆç†ç»“æœ                    |
| å…¼å®¹æ€§           | æ”¯æŒ IE9+ï¼ˆå…¼å®¹æ—§æµè§ˆå™¨ï¼‰| æ”¯æŒ ES6+ æµè§ˆå™¨ï¼Œä¸å…¼å®¹ IEï¼ˆæ—  Proxy æ”¯æŒï¼‰|

### API è®¾è®¡ï¼šOptions API vs Composition APIï¼ˆé‡ç‚¹ï¼‰
Vue2ï¼ˆOptions APIï¼‰
```js
data() {}
methods() {}
computed() {}
watch() {}
```
é—®é¢˜ï¼š
- é€»è¾‘åˆ†æ•£
- ç»„ä»¶ä¸€å¤æ‚å°±â€œæ¨ªå‘æ‹†æ•£â€

Vue3ï¼ˆComposition APIï¼‰
```js
setup() {
  const count = ref(0)
  function add() {}
  return { count, add }
}
```
ä¼˜åŠ¿ï¼š
- é€»è¾‘æŒ‰ã€ŒåŠŸèƒ½ã€ç»„ç»‡
- ä»£ç å¯å¤ç”¨ï¼ˆHooksï¼‰
- å¯¹å¤æ‚ä¸šåŠ¡æ›´å‹å¥½

> Composition API è§£å†³çš„æ˜¯å¤æ‚ç»„ä»¶é€»è¾‘éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸ºäº†æ›¿ä»£ Options APIã€‚

### æ€§èƒ½æå‡ï¼ˆVue3 æ˜æ˜¾æ›´å¼ºï¼‰
æ›´å¿«çš„è™šæ‹Ÿ DOM diff
- ç¼–è¯‘é˜¶æ®µå¼•å…¥ Patch Flag

Tree Shaking
- æ²¡ç”¨åˆ°çš„åŠŸèƒ½ä¸ä¼šæ‰“åŒ…

æ›´å°çš„åŒ…ä½“
- Vue3 runtime æ›´è½»
> Vue3 æŠŠä¸€éƒ¨åˆ†è¿è¡Œæ—¶å·¥ä½œå‰ç§»åˆ°ç¼–è¯‘é˜¶æ®µï¼Œå› æ­¤æ•´ä½“æ¸²æŸ“æ€§èƒ½æ›´å¥½ã€‚

### TypeScript æ”¯æŒï¼ˆVue3 å®Œèƒœï¼‰

|       | Vue2               | Vue3 |
| ----- | ------------------ | ---- |
| TS æ”¯æŒ | ä¾èµ– class-component | åŸç”Ÿæ”¯æŒ |
| ç±»å‹æ¨å¯¼  | å¼±                  | éå¸¸å¼º  |
> Vue3 æ˜¯åœ¨è®¾è®¡é˜¶æ®µå°±å›´ç»• TypeScript æ¥åšçš„ï¼ŒComposition API çš„ç±»å‹æ¨å¯¼éå¸¸è‡ªç„¶ã€‚

### æ–°ç‰¹æ€§ & è¯­æ³•å˜åŒ–ï¼ˆç®€è¦ç‚¹ï¼‰

- Fragmentï¼šç»„ä»¶å¯ä»¥å¤šä¸ªæ ¹èŠ‚ç‚¹
- Teleportï¼šå†…å®¹æ¸²æŸ“åˆ°æŒ‡å®š DOMï¼ˆå¦‚ Modalï¼‰
- Suspenseï¼šå¼‚æ­¥ç»„ä»¶æ›´ä¼˜é›…
- v-model æ”¹é€ ï¼ˆæ”¯æŒå¤šä¸ªï¼‰
- ç”Ÿå‘½å‘¨æœŸå‘½åå˜åŒ–ï¼š
  - beforeDestroy â†’ beforeUnmount

---

## 2. Vue çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ
Vue ç”Ÿå‘½å‘¨æœŸæè¿°çš„æ˜¯ä¸€ä¸ª**ç»„ä»¶ä»åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°åˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹**ï¼Œåœ¨ä¸åŒé˜¶æ®µæä¾›äº†å¯¹åº”çš„é’©å­å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä»‹å…¥ä¸šåŠ¡é€»è¾‘ã€‚

- åˆ›å»ºé˜¶æ®µï¼šç»„ä»¶å®ä¾‹åˆ›å»ºã€åˆå§‹åŒ–ï¼Œå°šæœªæŒ‚è½½åˆ° DOMï¼ˆæ— çœŸå® DOM æ“ä½œï¼‰ï¼›
- **æŒ‚è½½é˜¶æ®µ**ï¼šç»„ä»¶å®ä¾‹ä¸ DOM ç»‘å®šï¼Œæ¸²æŸ“çœŸå® DOM åˆ°é¡µé¢ï¼ˆé¦–æ¬¡æ¸²æŸ“ï¼Œå¯è¿›è¡Œ DOM æ“ä½œï¼‰ï¼›
- æ›´æ–°é˜¶æ®µï¼šç»„ä»¶å“åº”å¼æ•°æ®å˜åŒ–ï¼Œè§¦å‘è™šæ‹Ÿ DOM å¯¹æ¯”ä¸çœŸå® DOM æ›´æ–°ï¼ˆå¤šæ¬¡æ‰§è¡Œï¼‰ï¼›
- å¸è½½é˜¶æ®µï¼šç»„ä»¶å®ä¾‹ä» DOM ä¸­ç§»é™¤ï¼Œæ¸…ç†èµ„æºï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰ã€‚


### åˆ›å»ºé˜¶æ®µï¼ˆCreationï¼‰

beforeCreate
- dataã€methodsã€computed éƒ½è¿˜æ²¡åˆå§‹åŒ–
- å‡ ä¹ä¸ç”¨
>ğŸ‘‰ å…¸å‹åœºæ™¯ï¼šæå°‘ï¼Œç”¨æ¥åšæœ€æ—©æœŸçš„æ’ä»¶çº§é€»è¾‘

**created** â­ï¼ˆé«˜é¢‘ï¼‰
- dataã€methods å·²åˆå§‹åŒ–
- DOM è¿˜æœªç”Ÿæˆ
- å¯ä»¥ï¼š
  - å‘èµ·æ¥å£è¯·æ±‚
  - åˆå§‹åŒ–æ•°æ®
- âŒ ä¸èƒ½æ“ä½œ DOM
> created é€‚åˆåšæ•°æ®åˆå§‹åŒ–ï¼Œä¸é€‚åˆåš DOM æ“ä½œã€‚

### æŒ‚è½½é˜¶æ®µï¼ˆMountingï¼‰

beforeMount
- æ¨¡æ¿å·²ç¼–è¯‘
- DOM è¿˜æ²¡çœŸæ­£æŒ‚è½½
- ç”¨å¾—ä¸å¤š

**mounted** â­â­â­ï¼ˆé‡ç‚¹ï¼‰
- çœŸå® DOM å·²æŒ‚è½½
- å¯ä»¥å®‰å…¨æ“ä½œ DOM
- å¯ä»¥ï¼š
  - åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ï¼ˆEChartsã€Mapï¼‰
  - è·å– DOM å°ºå¯¸
> éœ€è¦æ“ä½œ DOM æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹ UI åº“ï¼Œä¸€èˆ¬æ”¾åœ¨ mounted ä¸­ã€‚

### æ›´æ–°é˜¶æ®µï¼ˆUpdatingï¼‰

beforeUpdate
- data å·²å˜åŒ–
- DOM è¿˜æ²¡æ›´æ–°
>ğŸ‘‰ å¯ä»¥åœ¨è¿™é‡Œæ‹¿åˆ°â€œæ›´æ–°å‰çš„ DOM çŠ¶æ€â€

updated
- DOM å·²å®Œæˆæ›´æ–°
- âš ï¸ æ³¨æ„ï¼š
  - ä¸è¦åœ¨ updated é‡Œå†ä¿®æ”¹æ•°æ®
  - å®¹æ˜“é€ æˆæ­»å¾ªç¯

### é”€æ¯é˜¶æ®µï¼ˆDestructionï¼‰
beforeDestroy
- å®ä¾‹è¿˜å¯ç”¨
- æ¸…ç†å·¥ä½œæœ€ä½³æ—¶æœº
- å¸¸è§æ“ä½œï¼š
  - æ¸…é™¤å®šæ—¶å™¨
  - è§£ç»‘äº‹ä»¶
  - å–æ¶ˆè®¢é˜…

destroyed
- å®ä¾‹å®Œå…¨é”€æ¯
- åŸºæœ¬ç”¨ä¸åˆ°

### Vue3 ç”Ÿå‘½å‘¨æœŸå˜åŒ–
| Vue2          | Vue3           |
| ------------- |----------------|
| beforeCreate  | setup()  é¡¶å±‚    |
| created       | setup()  é¡¶å±‚    |
| beforeMount   | onBeforeMount  |
| mounted       | onMounted      |
| beforeUpdate  | onBeforeUpdate |
| updated       | onUpdated      |
| beforeDestroy | onBeforeUnmount |
| destroyed     | onUnmounted    |


---















